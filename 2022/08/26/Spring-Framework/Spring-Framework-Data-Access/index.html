<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="JiangChunbo&#39;s blog">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      Spring Framework Data Access | ğŸ¥«ğŸ
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    
<script src="/js/qrious.js"></script>

  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="ğŸ¥«ğŸ" type="application/atom+xml">
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>ğŸ¥«ğŸ</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/categories/" class="item-link">Categories</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/categories/" class="menu-link">Categories</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>Spring Framework Data Access</h2>
  <p class="post-date">2022-08-26</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="Data-Access"><a href="#Data-Access" class="headerlink" title="Data Access"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#spring-data-tier">Data Access</a></h1><hr>
<h2 id="1-Transaction-Management"><a href="#1-Transaction-Management" class="headerlink" title="1. Transaction Management"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction">1. Transaction Management</a></h2><h3 id="1-1-Advantages-of-the-Spring-Frameworkâ€™s-Transaction-Support-Model"><a href="#1-1-Advantages-of-the-Spring-Frameworkâ€™s-Transaction-Support-Model" class="headerlink" title="1.1. Advantages of the Spring Frameworkâ€™s Transaction Support Model"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-motivation">1.1. Advantages of the Spring Frameworkâ€™s Transaction Support Model</a></h3><h3 id="1-1-1-Global-Transactions"><a href="#1-1-1-Global-Transactions" class="headerlink" title="1.1.1. Global Transactions"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-global">1.1.1. Global Transactions</a></h3><h2 id="1-2-Understanding-the-Spring-Framework-Transaction-Abstraction"><a href="#1-2-Understanding-the-Spring-Framework-Transaction-Abstraction" class="headerlink" title="1.2. Understanding the Spring Framework Transaction Abstraction"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-strategies">1.2. Understanding the Spring Framework Transaction Abstraction</a></h2><p>Spring äº‹åŠ¡æŠ½è±¡çš„å…³é”®åœ¨äºäº‹åŠ¡ç­–ç•¥æ¦‚å¿µã€‚äº‹åŠ¡ç­–ç•¥è¢«å®šä¹‰åœ¨ <code>TransactionManager</code>ï¼Œç‰¹åˆ«æ˜¯ï¼ŒPlatformTransactionManager ç”¨äºå‘½ä»¤å¼äº‹åŠ¡ç®¡ç†å’Œ ReactiveTransactionManager ç”¨äºå“åº”å¼äº‹åŠ¡ç®¡ç†ã€‚</p>
<p>PlatformTransactionManager ç±»ä¼¼ Spring Framework IoC å®¹å™¨çš„å…¶ä»– beanã€‚è¿™ç§å¥½å¤„æ˜¯ï¼Œè®© Spring Framework äº‹åŠ¡ç§°ä¸ºä¸€ä¸ªæŠ½è±¡ï¼Œå³ä½¿ä½ ä½¿ç”¨ JTAã€‚ä½ å¯ä»¥æ¯”ç›´æ¥ä½¿ç”¨ JTA æ›´è½»æ¾åœ°æµ‹è¯•äº‹åŠ¡ä»£ç ã€‚</p>
<p>åŒæ ·ï¼Œåœ¨ Spring ä¸­ï¼Œå¯ä»¥è¢«ä»»ä½• PlatformTransactionManager æ¥å£é¢æ–¹æ³•æŠ›å‡ºçš„ TransactionException æ˜¯æœªæ£€æŸ¥çš„ï¼ˆä¹Ÿå°±æ˜¯ç»§æ‰¿äº RuntimeExceptionï¼‰ã€‚äº‹åŠ¡åŸºç¡€æ¶æ„çš„é”™è¯¯æ€»æ˜¯è‡´å‘½çš„ã€‚åœ¨ç½•è§çš„æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºçš„ä»£ç å¯ä»¥ä»äº‹åŠ¡å‘ç”Ÿçš„æ•…éšœä¸­æ¢å¤ï¼Œå¼€å‘äººå‘˜ä»ç„¶å¯ä»¥é€‰æ‹© catch å’Œå¤„ç† TransactionExceptionã€‚</p>
<p><code>TransactionDefinition</code> æ¥å£æŒ‡å®šå¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>Propagationï¼šé€šå¸¸ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´ä¸­çš„æ‰€æœ‰ä»£ç è¿è¡Œåœ¨é‚£ä¸ªäº‹åŠ¡ä¸­ã€‚ä½†æ˜¯ï¼Œå¦‚æœå½“ä¸€ä¸ªäº‹åŠ¡ä¸Šä¸‹æ–‡å·²ç»å­˜åœ¨æ—¶ï¼Œè¿è¡Œäº†ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•ï¼Œåˆ™å¯ä»¥æŒ‡å®šè¿™ç§è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œä»£ç å¯ä»¥ç»§ç»­è¿è¡Œåœ¨ç°æœ‰äº‹åŠ¡ä¸­ï¼ˆé€šå¸¸çš„æƒ…å†µï¼‰ï¼Œæˆ–è€…æš‚åœå·²å­˜åœ¨çš„äº‹åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</li>
<li>Isolationï¼šéš”ç¦»çº§åˆ«ã€‚è¯¥äº‹åŠ¡ä»å…¶ä»–äº‹åŠ¡çš„å·¥ä½œä¸­éš”ç¦»çš„ç¨‹åº¦ã€‚</li>
<li>Timeoutï¼šè¶…æ—¶ã€‚åœ¨è¶…æ—¶ä¹‹å‰è¯¥äº‹åŠ¡å¯ä»¥è¿è¡Œçš„æ—¶é—´ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨ç”±äº‹åŠ¡åº•å±‚æœºåˆ¶å›æ»šã€‚</li>
<li>Read-only statusï¼šä½ å¯ä»¥åœ¨ä»£ç è¯»å–ä½†ä¸ä¿®æ”¹æ•°æ®æ—¶ä½¿ç”¨åªè¯»çŠ¶æ€ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåªè¯»äº‹åŠ¡æ—¶æœ‰ç”¨çš„ä¼˜åŒ–ï¼Œå¦‚ Hibernateã€‚</li>
</ul>
<p>è¿™äº›è®¾ç½®åæ˜ äº†æ ‡å‡†çš„äº‹åŠ¡æ¦‚å¿µã€‚</p>
<h3 id="1-4-Declarative-Transaction-Management"><a href="#1-4-Declarative-Transaction-Management" class="headerlink" title="1.4. Declarative Transaction Management"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-declarative">1.4. Declarative Transaction Management</a></h3><blockquote>
<p>å¤§å¤šæ•° Spring æ¡†æ¶ç”¨æˆ·é€‰æ‹©å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚æ­¤é€‰é¡¹å¯¹åº”ç”¨ç¨‹åºä»£ç å½±å“æœ€å°ï¼Œæ˜¯æœ€ç¬¦åˆéä¾µå…¥å¼è½»é‡å®¹å™¨çš„ç†æƒ³æ–¹å¼ã€‚</p>
</blockquote>
<p>åŸºäº Spring é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼ŒSpring æ¡†æ¶çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ˜¯å¯èƒ½çš„ã€‚ä½†æ˜¯ï¼Œç”±äºäº‹åŠ¡åˆ‡é¢ä»£ç éšç€ Spring Framework å‘å¸ƒè€Œæ¥ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ ·æ¿ä¸­ä½¿ç”¨ï¼ŒAOP çš„æ¦‚å¿µæ²¡æœ‰å¿…è¦ç†è§£ä¸ºå……åˆ†åˆ©ç”¨è¿™æ®µä»£ç ã€‚</p>
<p>Spring Framework çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†ç±»ä¼¼äº EJB CMTï¼Œå› æ­¤ä½ å¯ä»¥æŒ‡å®šäº‹åŠ¡è¡Œä¸ºåˆ°å•ä¸ªæ–¹æ³•çº§åˆ«ã€‚å¦‚æœ‰å¿…è¦ï¼Œä½ å¯ä»¥åœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ setRollBackOnly()ã€‚</p>
<h4 id="1-4-1-Understanding-the-Spring-Frameworkâ€™s-Declarative-Transaction-Implementation"><a href="#1-4-1-Understanding-the-Spring-Frameworkâ€™s-Declarative-Transaction-Implementation" class="headerlink" title="1.4.1. Understanding the Spring Frameworkâ€™s Declarative Transaction Implementation"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#tx-decl-explained">1.4.1. Understanding the Spring Frameworkâ€™s Declarative Transaction Implementation</a></h4><p>ä»…ä»…ä½¿ç”¨ <code>@Transactional</code> æ³¨è§£æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œè¿˜éœ€è¦æ·»åŠ  <code>@EnableTransactionManagement</code> åˆ°é…ç½®ç±»ä¸­ã€‚</p>
<p>æŒæ¡ Spring Framework å£°æ˜å¼äº‹åŠ¡æ”¯æŒæœ€é‡è¦çš„æ¦‚å¿µæ˜¯é€šè¿‡ AOP ä»£ç†å¼€å¯çš„æ”¯æŒå’Œç”±å…ƒæ•°æ®ï¼ˆXML æˆ–è€… æ³¨è§£ï¼‰é©±åŠ¨çš„ transactional adviceã€‚AOP å’Œäº‹åŠ¡å…ƒæ•°æ®çš„ç»„åˆäº§ç”Ÿäº† AOP ä»£ç†ï¼Œå…¶ä½¿ç”¨ TransactionInterceptor ä¸é€‚å½“çš„ TransactionManager å®ç°æ¥é©±åŠ¨å›´ç»•æ–¹æ³•è°ƒç”¨äº‹åŠ¡ã€‚</p>
<p>Spring æ¡†æ¶çš„ <code>TransactionInterceptor</code> ä¸ºå‘½ä»¤å¼å’Œå“åº”å¼ç¼–ç¨‹æ¨¡å‹æä¾›äº‹åŠ¡ç®¡ç†ã€‚æ‹¦æˆªå™¨é€šè¿‡æ£€æŸ¥æ–¹æ³•è¿”å›ç±»å‹æ¥æ£€æµ‹æ‰€éœ€çš„äº‹åŠ¡ç®¡ç†ã€‚</p>
<h4 id="1-4-6-Using-Transactional"><a href="#1-4-6-Using-Transactional" class="headerlink" title="1.4.6. Using @Transactional"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-declarative-annotations">1.4.6. Using @Transactional</a></h4><p>é™¤äº†åŸºäºæ³¨è§£çš„å£°æ˜å¼æ–¹å¼è¿›è¡Œäº‹åŠ¡é…ç½®ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨åŸºäºæ³¨è§£çš„æ–¹å¼ã€‚ç›´æ¥åœ¨ Java ä»£ç ä¸­å£°æ˜äº‹åŠ¡è¯­ä¹‰ä¸Šæ›´è´´è¿‘å—å½±å“çš„ä»£ç ã€‚</p>
<p>ä½¿ç”¨åœ¨ç±»çº§åˆ«ä¸Šï¼Œè¡¨ç¤ºæ³¨è§£é»˜è®¤ä½œç”¨åŸŸå£°æ˜ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼ˆåŒ…æ‹¬å­ç±»ï¼‰ã€‚æˆ–è€…ï¼Œæ¯ä¸ªæ–¹æ³•å¯ä»¥è¢«å•ç‹¬æ³¨è§£ã€‚æ³¨æ„ï¼Œç±»çº§åˆ«çš„æ³¨è§£ä¸ä¼šä½¿ç”¨ç¥–å…ˆç±»åˆ°ç±»çš„å±‚æ¬¡ç»“æ„ï¼›åœ¨è¿™æ ·çš„åœºæ™¯ä¸­ï¼Œéœ€è¦åœ¨æœ¬åœ°é‡æ–°å£°æ˜ï¼Œä¸€è¾¹å‚ä¸å­ç±»çº§æ³¨è§£ã€‚</p>
<p>åœ¨ xml é…ç§ï¼Œæ ‡ç­¾ <code>&lt;tx:annotation-driven/&gt;</code>æä¾›ç›¸ä¼¼çš„ç®€ä¾¿æ–¹å¼ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;txManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>å¦‚æœä½ æƒ³ç»‘å®šçš„ <code>TransactionManager</code> åç§°å°±æ˜¯ <code>transactionManager</code>ï¼Œä½ å¯ä»¥çœç•¥é…ç½® <code>&lt;tx:annotation-driven/&gt;</code> æ ‡ç­¾ä¸­çš„ <code>transaction-manager</code> å±æ€§ï¼›å¦åˆ™ä½ ä¸å¾—ä¸æŒ‡å®š <code>transaction-manager</code> å±æ€§ã€‚</li>
</ul>
</blockquote>
<h5 id="Transactional-Settings"><a href="#Transactional-Settings" class="headerlink" title="@Transactional Settings"></a>@Transactional Settings</h5><p><code>@Transactional</code> æ³¨è§£æ˜¯æŒ‡å®šæ¥å£ï¼Œç±»æˆ–è€…æ–¹æ³•å¿…é¡»å…·æœ‰äº‹åŠ¡è¯­ä¹‰ã€‚é»˜è®¤çš„ <code>@Transactional</code> è®¾ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¼ æ’­ç±»å‹ <code>PROPAGATION_REQUIRED</code></li>
<li>éš”ç¦»çº§åˆ« <code>ISOLATION_DEFAULT</code></li>
<li>äº‹åŠ¡æ˜¯è¯»å†™å‹</li>
<li>äº‹åŠ¡è¶…æ—¶é»˜è®¤ä¸ºåº•å±‚äº‹åŠ¡ç³»ç»Ÿçš„é»˜è®¤è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœä¸æ”¯æŒè¶…æ—¶ï¼Œåˆ™æ²¡æœ‰</li>
<li>ä»»ä½• <code>RuntimeException</code> è§¦å‘å›æ»šï¼Œä»»ä½•æ£€æŸ¥å‹ <code>Exception</code> å¹¶ä¸ä¼šã€‚</li>
</ul>
<p>&amp;nbsp;</p>
<h5 id="Custom-Composed-Annotations"><a href="#Custom-Composed-Annotations" class="headerlink" title="Custom Composed Annotations"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#tx-custom-attributes">Custom Composed Annotations</a></h5><h4 id="1-4-7-Transaction-Propagation"><a href="#1-4-7-Transaction-Propagation" class="headerlink" title="1.4.7. Transaction Propagation"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#tx-propagation">1.4.7. Transaction Propagation</a></h4><p>æœ¬èŠ‚æè¿° Spring ä¸­äº‹åŠ¡ä¼ æ’­çš„ä¸€äº›è¯­ä¹‰ã€‚è¯·æ³¨æ„ï¼Œæœ¬èŠ‚ä¸æ˜¯å¯¹äº‹åŠ¡ä¼ æ’­æœ¬èº«çš„ä»‹ç»ã€‚ç›¸åï¼Œå®ƒè¯¦ç»†æè¿°äº† Spring ä¸­å…³äºäº‹åŠ¡ä¼ æ’­çš„ä¸€äº›è¯­ä¹‰ã€‚</p>
<p>åœ¨ Spring ç®¡ç†çš„äº‹åŠ¡ä¸­ï¼Œè¦æ³¨æ„ç‰©ç†äº‹åŠ¡å’Œé€»è¾‘äº‹åŠ¡ä¹‹é—´çš„åŒºåˆ«ï¼Œä»¥åŠä¼ æ’­è®¾ç½®å¦‚ä½•åº”ç”¨çš„åŒºåˆ«ã€‚</p>
<h5 id="Understanding-PROPAGATION-REQUIRED"><a href="#Understanding-PROPAGATION-REQUIRED" class="headerlink" title="Understanding PROPAGATION_REQUIRED"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#tx-propagation-required">Understanding <code>PROPAGATION_REQUIRED</code></a></h5><img src="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/images/tx_prop_required.png">

<p><code>PROPAGATION_REQUIRED</code> å¼ºåˆ¶æ‰§è¡Œä¸€ä¸ªç‰©ç†äº‹åŠ¡ï¼Œå¦‚æœä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æœ¬åœ°ä¸ºå½“å‰èŒƒå›´å¼€å¯äº‹åŠ¡ï¼Œæˆ–è€…å‚ä¸å®šä¹‰ä¸ºæ›´å¤§èŒƒå›´çš„å·²ç»å­˜åœ¨çš„å¤–éƒ¨äº‹åŠ¡ã€‚åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…çš„å…¬ç”¨è°ƒç”¨æ ˆå®‰æ’ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é»˜è®¤å€¼ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªå§”æ‰˜ç»™å‡ ä¸ªä»“åº“æ–¹æ³•çš„æœåŠ¡é—¨é¢ï¼Œå…¶ä¸­æ‰€æœ‰çš„åº•å±‚èµ„æºéƒ½å¿…é¡»å‚ä¸æœåŠ¡çº§åˆ«äº‹åŠ¡ï¼‰</p>
<p>å½“ä¼ æ’­è®¾ç½®ä¸º <code>PROPAGATION_REQUIRED</code> æ—¶ï¼Œä¼šä¸ºæ¯ä¸ªè®¾ç½®åº”ç”¨çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªé€»è¾‘äº‹åŠ¡èŒƒå›´ã€‚æ¯ä¸ªæ­¤ç±»é€»è¾‘äº‹åŠ¡èŒƒå›´å¯ä»¥å•ç‹¬å†³å®šä»…å›æ»šçŠ¶æ€ï¼Œå¤–éƒ¨äº‹åŠ¡èŒƒå›´é€»è¾‘ä¸Šç‹¬ç«‹äºå†…éƒ¨äº‹åŠ¡èŒƒå›´ã€‚åœ¨æ ‡å‡†çš„ <code>PROPAGATION_REQUIRED</code> è¡Œä¸ºä¸‹ï¼Œæ‰€æœ‰è¿™äº›èŒƒå›´éƒ½æ˜ å°„ç›¸åŒçš„ç‰©ç†äº‹åŠ¡ã€‚å†…éƒ¨äº‹åŠ¡èŒƒå›´çš„ä»…å›æ»šæ ‡è®°ç¡®å®ä¼šå½±å“åˆ°å¤–éƒ¨äº‹åŠ¡å®é™…æäº¤çš„æœºä¼šã€‚</p>
<h5 id="Understanding-PROPAGATION-REQUIRES-NEW"><a href="#Understanding-PROPAGATION-REQUIRES-NEW" class="headerlink" title="Understanding PROPAGATION_REQUIRES_NEW"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#tx-propagation-requires_new">Understanding <code>PROPAGATION_REQUIRES_NEW</code></a></h5><p>ç›¸è¾ƒäº <code>PROPAGATION_REQUIRED</code>ï¼Œ<code>PROPAGATION_REQUIRES_NEW</code> æ€»æ˜¯ä¸ºæ¯ä¸ªå—å½±å“çš„äº‹åŠ¡èŒƒå›´ä½¿ç”¨ç‹¬ç«‹çš„ç‰©ç†äº‹åŠ¡ï¼Œä»ä¸å‚ä¸åˆ°å¤–éƒ¨èŒƒå›´çš„ç°æœ‰äº‹åŠ¡ä¸­å»ã€‚åœ¨è¿™ç§å®‰æ’ä¸‹ï¼Œåº•å±‚èµ„æºäº‹åŠ¡æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ï¼Œå¯ä»¥ç‹¬ç«‹æäº¤ã€å›æ»šï¼Œå¤–éƒ¨äº‹åŠ¡ä¸å—å†…éƒ¨äº‹åŠ¡å›æ»šçŠ¶æ€å½±å“ï¼Œå¹¶ä¸”å†…éƒ¨äº‹åŠ¡çš„é”åœ¨å®Œæˆåç«‹å³é‡Šæ”¾ã€‚è¿™ç§ç‹¬ç«‹çš„å†…éƒ¨äº‹åŠ¡ä¹Ÿå¯ä»¥å£°æ˜è‡ªå·±çš„éš”ç¦»çº§åˆ«ï¼Œè¶…æ—¶ï¼Œä»¥åŠæ˜¯å¦åªè¯»ï¼Œè€Œä¸ç»§æ‰¿å¤–éƒ¨äº‹ç‰©çš„ç‰¹å¾ã€‚</p>
<h5 id="Understanding-PROPAGATION-NESTED"><a href="#Understanding-PROPAGATION-NESTED" class="headerlink" title="Understanding PROPAGATION_NESTED"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#tx-propagation-nested">Understanding <code>PROPAGATION_NESTED</code></a></h5><p><code>PROPAGATION_NESTED</code> ä½¿ç”¨ä¸€ä¸ªå…·æœ‰å¤šä¸ªå¯ä»¥å›æ»šä¿å­˜ç‚¹çš„ç‰©ç†äº‹åŠ¡ã€‚è¿™ç§éƒ¨åˆ†å›æ»šè®©å†…éƒ¨äº‹åŠ¡èŒƒå›´è§¦å‘å…¶èŒƒå›´å†…çš„å›æ»šï¼Œå¹¶ä¸”å³ä½¿æŸäº›æ“ä½œå·²ç»å›æ»šï¼Œå¤–éƒ¨äº‹åŠ¡ä»èƒ½å¤Ÿç»§ç»­ç‰©ç†äº‹åŠ¡ã€‚è¿™ä¸ªè®¾ç½®é€šå¸¸æ˜ å°„åˆ° JDBC ä¿å­˜ç‚¹ï¼Œå› æ­¤å®ƒåªé€‚ç”¨äº JDBC èµ„æºäº‹åŠ¡ã€‚å‚è§ Spring çš„ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/javadoc-api/org/springframework/jdbc/datasource/DataSourceTransactionManager.html"><code>DataSourceTransactionManager</code></a></p>
<h4 id="1-5-3-Using-the-TransactionManager"><a href="#1-5-3-Using-the-TransactionManager" class="headerlink" title="1.5.3. Using the TransactionManager"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-programmatic-tm">1.5.3. Using the TransactionManager</a></h4><h5 id="Using-the-PlatformTransactionManager"><a href="#Using-the-PlatformTransactionManager" class="headerlink" title="Using the PlatformTransactionManager"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-programmatic-ptm">Using the PlatformTransactionManager</a></h5><p>å¯¹äºå¼ºåˆ¶æ€§çš„äº‹åŠ¡ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>org.springframework.transaction.PlatformTransactionManager</code> æ¥ç®¡ç†äº‹åŠ¡ã€‚ä¸ºæ­¤ï¼Œå°†ä½ è¦ä½¿ç”¨çš„ <code>PlatformTransactionManager</code> çš„å®ç°ç±»ä¼ é€’ç»™ä½ çš„ beanã€‚ç„¶åï¼Œé€šè¿‡ä½¿ç”¨ <code>TransactionDefinition</code> å’Œ <code>TransactionStatus</code> å¯¹è±¡ï¼Œä½ å¯ä»¥å¯åŠ¨ï¼Œå›æ»šä»¥åŠæäº¤äº‹åŠ¡ã€‚</p>
<h5 id="Using-the-ReactiveTransactionManager"><a href="#Using-the-ReactiveTransactionManager" class="headerlink" title="Using the ReactiveTransactionManager"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#transaction-programmatic-rtm">Using the ReactiveTransactionManager</a></h5><p>å½“ä½¿ç”¨å“åº”å¼äº‹åŠ¡æ—¶ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>org.springframework.transaction.ReactiveTransactionManager</code> ç®¡ç†ä½ çš„äº‹åŠ¡ã€‚</p>
<h3 id="1-6-Choosing-Between-Programmatic-and-Declarative-Transaction-Management"><a href="#1-6-Choosing-Between-Programmatic-and-Declarative-Transaction-Management" class="headerlink" title="1.6. Choosing Between Programmatic and Declarative Transaction Management"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#tx-decl-vs-prog">1.6. Choosing Between Programmatic and Declarative Transaction Management</a></h3><p>å½“ä½ å…·æœ‰å°‘é‡çš„äº‹åŠ¡æ“ä½œæ—¶ï¼Œç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é€šå¸¸æ˜¯ä¸ªä¸é”™çš„ä¸»æ„ã€‚</p>
<p>&amp;nbsp;</p>
<h2 id="2-DAO-Support"><a href="#2-DAO-Support" class="headerlink" title="2. DAO Support"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#dao">2. DAO Support</a></h2><h3 id="2-1-Consistent-Exception-Hierarchy"><a href="#2-1-Consistent-Exception-Hierarchy" class="headerlink" title="2.1. Consistent Exception Hierarchy"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#dao-exceptions">2.1. Consistent Exception Hierarchy</a></h3><p>Spring æä¾›äº†ç‰¹å®šå¼‚å¸¸åˆ°è‡ªå·±å¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„çš„è½¬æ¢ã€‚è¯¥ç±»å±‚æ¬¡ç»“æ„å°† <code>DataAccessException</code> ä½œä¸ºæ ¹å¼‚å¸¸ã€‚</p>
<h2 id="3-Data-Access-with-JDBC"><a href="#3-Data-Access-with-JDBC" class="headerlink" title="3. Data Access with JDBC"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#jdbc">3. Data Access with JDBC</a></h2><h3 id="3-1-Choosing-an-Approach-for-JDBC-Database-Access"><a href="#3-1-Choosing-an-Approach-for-JDBC-Database-Access" class="headerlink" title="3.1. Choosing an Approach for JDBC Database Access"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#jdbc-choose-style">3.1. Choosing an Approach for JDBC Database Access</a></h3><p>ä½ å¯ä»¥é€‰æ‹©åŠä¸­æ–¹æ¥æ„å»º JDBC æ•°æ®åº“è®¿é—®åŸºç¡€ã€‚é™¤äº†ä¸‰ç§ JdbcTemplate ä¹‹å¤–ï¼Œä¸€ä¸ªæ–°çš„ SimpleJdbcInsert å’Œ SimpleJdbcCall æ–¹æ³•ä¼˜åŒ–äº†æ•°æ®åº“å…ƒæ•°æ®ï¼Œå¹¶ä¸” RDBMS å¯¹è±¡é£æ ¼é‡‡å–äº†ä¸€ç§æ›´é¢å‘å¯¹è±¡çš„æ–¹å¼ï¼Œç±»ä¼¼äº JDO æŸ¥è¯¢è®¾è®¡ã€‚</p>
<ul>
<li><code>JdbcTemplate</code> æ˜¯ç»å…¸ä¸”æœ€æµè¡Œçš„ Spring JDBC æ–¹å¼ã€‚è¿™ç§ â€œæœ€ä½çº§åˆ«â€ çš„æ–¹æ³•å’Œæ‰€æœ‰å…¶ä»–å°è£…çš„æ–¹æ³•ä½¿ç”¨ <code>JdbcTemplate</code></li>
<li><code>NamedParameterJdbcTemplate</code> åŒ…è£…äº†ä¸€ä¸ª <code>JdbcTemplate</code> ä»¥æä¾›å‘½åå‚æ•°è€Œä¸æ˜¯ä¼ ç»Ÿçš„ JDBC ? å ä½ç¬¦ã€‚å½“ä½ çš„ SQL è¯­å¥æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œè¿™ç§æ–¹æ³•æä¾›äº†æ›´å¥½çš„æ–‡æ¡£æ€§ä¸”æ˜“äºä½¿ç”¨ã€‚</li>
<li><code>SimpleJdbcInsert</code> å’Œ <code>SimpleJdbcCall</code> ä¼˜åŒ–äº†æ•°æ®åº“å…ƒæ•°æ®æ¥é™åˆ¶å¿…è¦é…ç½®çš„æ•°é‡ã€‚è¿™ç§æ–¹æ³•ç®€åŒ–äº†ç¼–ç ï¼Œä½ åªéœ€è¦æä¾›è¡¨åç§°ï¼Œæˆ–è€…å­˜å‚¨è¿‡ç¨‹åç§°ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå‚æ•°ä¸åˆ—ååŒ¹é…çš„æ˜ å°„ã€‚</li>
</ul>
<h3 id="3-3-Using-the-JDBC-Core-Classes-to-Control-Basic-JDBC-Processing-and-Error-Handling"><a href="#3-3-Using-the-JDBC-Core-Classes-to-Control-Basic-JDBC-Processing-and-Error-Handling" class="headerlink" title="3.3. Using the JDBC Core Classes to Control Basic JDBC Processing and Error Handling"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#jdbc-core">3.3. Using the JDBC Core Classes to Control Basic JDBC Processing and Error Handling</a></h3><h4 id="3-3-1-Using-JdbcTemplate"><a href="#3-3-1-Using-JdbcTemplate" class="headerlink" title="3.3.1. Using JdbcTemplate"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#jdbc-JdbcTemplate">3.3.1. Using JdbcTemplate</a></h4><p><code>JdbcTemplate</code> æ˜¯ JDBC <code>core</code> åŒ…ä¸‹çš„æ ¸å¿ƒç±»ã€‚å®ƒå¤„ç†èµ„æºçš„åˆ›å»ºä¸é‡Šæ”¾ï¼Œè¿™å¯ä»¥å¸®åŠ©ä½ é¿å…ä¸€äº›å¸¸è§çš„é”™è¯¯ï¼Œæ¯”å¦‚å¿˜è®°å…³é—­è¿æ¥ã€‚å®ƒæ‰§è¡Œæ ¸å¿ƒ JDBC å·¥ä½œæµçš„åŸºæœ¬ä»»åŠ¡ï¼ˆå¦‚è¯­å¥çš„åˆ›å»ºå’Œæ‰§è¡Œï¼‰ï¼Œè®©åº”ç”¨ç¨‹åºä»£ç æ¥æä¾› SQL å’Œè·å–ç»“æœé›†ã€‚</p>
<p><code>JdbcTemplate</code> å¯ä»¥åšå¦‚ä¸‹çš„äº‹æƒ…ï¼š</p>
<ul>
<li>è¿è¡Œ SQL æŸ¥è¯¢</li>
<li>æ›´æ–°è¯­å¥ä»¥åŠå­˜å‚¨è¿‡ç¨‹è°ƒç”¨</li>
<li>æ‰§è¡Œ <code>ResultSet</code> çš„è¿­ä»£ï¼Œä»¥åŠæå–è¿”å›å‚æ•°å€¼çš„ç»“æœ</li>
<li>æ•è· JDBC å¼‚å¸¸ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå®šä¹‰åœ¨ <code>org.springframework.dao</code> åŒ…ä¸‹çš„æ›´é€šç”¨ï¼Œæ›´å…·ä¿¡æ¯æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡</li>
</ul>
<p>å½“ä½ ä½¿ç”¨ <code>JdbcTemplate</code> æ—¶ï¼Œä½ åªéœ€è¦å®ç°ä¸€ä¸ªå›è°ƒæ¥å£ï¼Œç»™å‡ºæ˜ç¡®å®šä¹‰çš„çº¦å®šã€‚ç»™å®šä¸€ä¸ª <code>JdbcTemplate</code> ç±»æä¾›çš„ <code>Connection</code>ï¼Œ<code>PreparedStatementCreator</code> å›è°ƒæ¥å£ä¼šåˆ›å»ºä¸€ä¸ª é¢„ç¼–è¯‘çš„è¯­å¥ï¼Œæä¾›äº† SQL ä»¥åŠä»»ä½•å¿…è¦çš„å‚æ•°ã€‚<code>CallableStatementCreator</code> æ¥å£ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå®ƒåˆ›å»ºå¯è°ƒç”¨çš„è¯­å¥ã€‚<code>RowCallbackHandler</code> æ¥å£ä» <code>ResultSet</code> çš„æ¯ä¸€è¡Œä¸­æå–å€¼ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ä½ çš„ DAO å®ç°ä¸­é€šè¿‡ç»™äºˆä¸€ä¸ª <code>DataSource</code> çš„å¼•ç”¨ç›´æ¥å®ä¾‹åŒ– <code>JdbcTempalte</code> å¹¶ä½¿ç”¨ï¼›æˆ–è€…ï¼Œä½ å¯ä»¥é…ç½®å®ƒåˆ° Spring IoC å®¹å™¨é‡Œï¼Œå¹¶å°†å…¶ä½œä¸ºä¸€ä¸ª bean å¼•ç”¨ç»™ DAOã€‚</p>
<blockquote>
<p><code>DataSource</code> åº”å½“æ€»æ˜¯é…ç½®ä¸ºä¸€ä¸ª Spring Ioc å®¹å™¨ä¸­çš„ beanã€‚</p>
</blockquote>
<p>æ­¤ç±»å‘å‡ºçš„æ‰€æœ‰ SQL éƒ½ä»¥ debug çº§åˆ«çš„æ—¥å¿—è®°å½•ä¸‹æ¥ï¼Œ</p>
<h5 id="Querying-SELECT"><a href="#Querying-SELECT" class="headerlink" title="Querying (SELECT)"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#jdbc-JdbcTemplate-examples-query">Querying (SELECT)</a></h5><h5 id="Updating-INSERT-UPDATE-and-DELETE-with-JdbcTemplate"><a href="#Updating-INSERT-UPDATE-and-DELETE-with-JdbcTemplate" class="headerlink" title="Updating (INSERT, UPDATE, and DELETE) with JdbcTemplate"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#jdbc-JdbcTemplate-examples-update">Updating (INSERT, UPDATE, and DELETE) with JdbcTemplate</a></h5><h4 id="3-3-3-Using-SQLExceptionTranslator"><a href="#3-3-3-Using-SQLExceptionTranslator" class="headerlink" title="3.3.3. Using SQLExceptionTranslator"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/data-access.html#jdbc-SQLExceptionTranslator">3.3.3. Using SQLExceptionTranslator</a></h4><p>SQLExceptionTranslator æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨äº SQLExceptions å’Œ Spring çš„ DataAccessException ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p>
<p>SQLErrorCodeSQLExceptionTranslator æ˜¯ SQLExceptionTranslator é»˜è®¤çš„å®ç°ã€‚æ­¤å®ç°ä½¿ç”¨ç‰¹å®šçš„ä¾›åº”å•†ä»£ç ï¼Œæ¯” SQLState æ›´ç²¾ç¡®ã€‚é”™è¯¯ä»£ç è½¬æ¢åŸºäºåä¸º SQLErrorCodes çš„ JavaBean ç±»ä¸­ä¿å­˜çš„ä»£ç ã€‚æ­¤ç±»ç”± SQLErrorCodesFactory åˆ›å»ºå’Œå¡«å……ï¼Œæ˜¯åŸºäº sql-error-codes.xml çš„é…ç½®æ–‡ä»¶çš„å†…å®¹åˆ›å»ºçš„å·¥å‚ã€‚</p>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2022/08/17/Spring-Framework/Spring-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86%E5%AE%9E%E8%B7%B5/">
        <span class="nav-arrow">â† </span>
        
          Spring è¯·æ±‚å‚æ•°å¤„ç†å®è·µ
        
      </a>
    
    
      <a class="nav-right" href="/2022/09/08/maven/Maven-%E7%AC%94%E8%AE%B0/">
        
          Maven ç¬”è®°
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- æ‰“èµ START -->
    
      <div class="money-like">
        <div class="reward-btn">
          èµ
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>ä½¿ç”¨æ”¯ä»˜å®æ‰“èµ</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>ä½¿ç”¨å¾®ä¿¡æ‰“èµ</b>
            </span>
          </span>
        </div>
        <p class="notice">è‹¥ä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¯¹æˆ‘æ‰“èµ</p>
      </div>
    
    <!-- æ‰“èµ END -->
    <!-- äºŒç»´ç  START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">æ‰«æäºŒç»´ç ï¼Œåˆ†äº«æ­¤æ–‡ç« </p>
      </div>
    
    <!-- äºŒç»´ç  END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo="JiangChunbo/jiangchunbo.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Data-Access"><span class="toc-nav-text">Data Access</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-Transaction-Management"><span class="toc-nav-text">1. Transaction Management</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-1-Advantages-of-the-Spring-Framework%E2%80%99s-Transaction-Support-Model"><span class="toc-nav-text">1.1. Advantages of the Spring Frameworkâ€™s Transaction Support Model</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-1-1-Global-Transactions"><span class="toc-nav-text">1.1.1. Global Transactions</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-2-Understanding-the-Spring-Framework-Transaction-Abstraction"><span class="toc-nav-text">1.2. Understanding the Spring Framework Transaction Abstraction</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-Declarative-Transaction-Management"><span class="toc-nav-text">1.4. Declarative Transaction Management</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-4-1-Understanding-the-Spring-Framework%E2%80%99s-Declarative-Transaction-Implementation"><span class="toc-nav-text">1.4.1. Understanding the Spring Frameworkâ€™s Declarative Transaction Implementation</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-4-6-Using-Transactional"><span class="toc-nav-text">1.4.6. Using @Transactional</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Transactional-Settings"><span class="toc-nav-text">@Transactional Settings</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Custom-Composed-Annotations"><span class="toc-nav-text">Custom Composed Annotations</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-4-7-Transaction-Propagation"><span class="toc-nav-text">1.4.7. Transaction Propagation</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Understanding-PROPAGATION-REQUIRED"><span class="toc-nav-text">Understanding PROPAGATION_REQUIRED</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Understanding-PROPAGATION-REQUIRES-NEW"><span class="toc-nav-text">Understanding PROPAGATION_REQUIRES_NEW</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Understanding-PROPAGATION-NESTED"><span class="toc-nav-text">Understanding PROPAGATION_NESTED</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-3-Using-the-TransactionManager"><span class="toc-nav-text">1.5.3. Using the TransactionManager</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Using-the-PlatformTransactionManager"><span class="toc-nav-text">Using the PlatformTransactionManager</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Using-the-ReactiveTransactionManager"><span class="toc-nav-text">Using the ReactiveTransactionManager</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-6-Choosing-Between-Programmatic-and-Declarative-Transaction-Management"><span class="toc-nav-text">1.6. Choosing Between Programmatic and Declarative Transaction Management</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-DAO-Support"><span class="toc-nav-text">2. DAO Support</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-1-Consistent-Exception-Hierarchy"><span class="toc-nav-text">2.1. Consistent Exception Hierarchy</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-Data-Access-with-JDBC"><span class="toc-nav-text">3. Data Access with JDBC</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-1-Choosing-an-Approach-for-JDBC-Database-Access"><span class="toc-nav-text">3.1. Choosing an Approach for JDBC Database Access</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-3-Using-the-JDBC-Core-Classes-to-Control-Basic-JDBC-Processing-and-Error-Handling"><span class="toc-nav-text">3.3. Using the JDBC Core Classes to Control Basic JDBC Processing and Error Handling</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3-3-1-Using-JdbcTemplate"><span class="toc-nav-text">3.3.1. Using JdbcTemplate</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Querying-SELECT"><span class="toc-nav-text">Querying (SELECT)</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Updating-INSERT-UPDATE-and-DELETE-with-JdbcTemplate"><span class="toc-nav-text">Updating (INSERT, UPDATE, and DELETE) with JdbcTemplate</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3-3-3-Using-SQLExceptionTranslator"><span class="toc-nav-text">3.3.3. Using SQLExceptionTranslator</span></a></li></ol></li></ol></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://example.com/2022/08/26/Spring-Framework/Spring-Framework-Data-Access/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>






    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2022 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
    
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>