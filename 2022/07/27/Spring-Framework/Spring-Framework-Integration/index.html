<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="JiangChunbo&#39;s blog">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      Spring Framework Integration | ğŸ¥«ğŸ
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    
<script src="/js/qrious.js"></script>

  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="ğŸ¥«ğŸ" type="application/atom+xml">
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>ğŸ¥«ğŸ</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/categories/" class="item-link">Categories</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/categories/" class="menu-link">Categories</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>Spring Framework Integration</h2>
  <p class="post-date">2022-07-27</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="Integration"><a href="#Integration" class="headerlink" title="Integration"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#spring-integration">Integration</a></h1><hr>
<h2 id="Message-Conversion"><a href="#Message-Conversion" class="headerlink" title="Message Conversion"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#rest-message-conversion">Message Conversion</a></h2><p>WebMvcConfigurationSupport å†…å«é»˜è®¤çš„ Converter</p>
<p>BufferedImageHttpMessageConverter è¿”å›å›¾ç‰‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/image/&#123;id&#125;&quot;, produces = MediaType.IMAGE_JPEG_VALUE)</span></span><br><span class="line"><span class="keyword">public</span> BufferedImage <span class="title function_">getImage</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Weather</span> <span class="variable">weather</span> <span class="operator">=</span> weatherMapper.getById(id);</span><br><span class="line">    <span class="keyword">return</span> ImageIO.read(weather.getPicture());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="6-Mail"><a href="#6-Mail" class="headerlink" title="6. Mail"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#mail">6. Mail</a></h2><p>Spring Boot çš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<p>(1) é…ç½®å¹¶å°† <code>JavaMailSender</code> æ³¨å…¥åˆ° IOC å®¹å™¨ï¼Œç±»ä¼¼ä¸€ä¸ª Mail å·¥å‚é…ç½®ï¼Œå¯ä»¥ getSessionï¼Œä¹Ÿå¯ä»¥ createMimeMessage</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaMailConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean(name = &quot;javaMailSender&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JavaMailSenderImpl <span class="title function_">javaMailSender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">JavaMailSenderImpl</span> <span class="variable">javaMailSender</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JavaMailSenderImpl</span>(); <span class="comment">// å”¯ä¸€çš„å®ç°</span></span><br><span class="line">        javaMailSender.setHost(<span class="string">&quot;smtp.qq.com&quot;</span>); <span class="comment">// è®¾ç½® SMTP ä¸»æœº</span></span><br><span class="line">        javaMailSender.setUsername(<span class="string">&quot;945086245@qq.com&quot;</span>);</span><br><span class="line">        javaMailSender.setPassword(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        javaMailSender.setDefaultEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> javaMailSender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2) ä½¿ç”¨ javaMailSender å‘é€ã€‚MimeMessageHelper ç±»ä¼¼ Builder è®¾è®¡ï¼Œä½†æ˜¯æ²¡æœ‰åšé“¾å¼è°ƒç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> javaMailSender.createMimeMessage();</span><br><span class="line"><span class="type">MimeMessageHelper</span> <span class="variable">mimeMessageHelper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage, <span class="literal">true</span>);</span><br><span class="line">mimeMessageHelper.setFrom(<span class="string">&quot;945086245@qq.com&quot;</span>); <span class="comment">// å‘é€äºº</span></span><br><span class="line">mimeMessageHelper.setTo(email); <span class="comment">// æ¥æ”¶äºº</span></span><br><span class="line">mimeMessageHelper.setSubject(<span class="string">&quot;éªŒè¯ç &quot;</span>);</span><br><span class="line">mimeMessageHelper.setText(<span class="string">&quot;æ‚¨çš„éªŒè¯ç æ˜¯: 9836, å¦‚éæœ¬äººæ“ä½œè¯·å¿½è§†ã€‚&quot;</span>);</span><br><span class="line">javaMailSender.send(mimeMessage);</span><br></pre></td></tr></table></figure>

<h2 id="7-Task-Execution-and-Scheduling"><a href="#7-Task-Execution-and-Scheduling" class="headerlink" title="7. Task Execution and Scheduling"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#scheduling">7. Task Execution and Scheduling</a></h2><p>Spring Framework åˆ†åˆ«ä½¿ç”¨ <code>TaskExecutor</code> å’Œ <code>TaskScheduler</code> æ¥å£ä¸ºå¼‚æ­¥æ‰§è¡Œå’Œä»»åŠ¡è°ƒåº¦æä¾›äº†æŠ½è±¡ã€‚Spring è¿˜å…·æœ‰é‚£äº›æ”¯æŒçº¿ç¨‹æ± çš„æ¥å£å®ç°æˆ–åœ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ç¯å¢ƒä¸­å§”æ‰˜ CommonJã€‚æœ€ç»ˆï¼Œé€šç”¨æ¥å£ä¹‹é—´çš„è¿™äº›å®ç°çš„ä½¿ç”¨æŠ½è±¡å‡ºäº† Java SE5ï¼ŒJava SE 6 ä»¥åŠ Java EE ç¯å¢ƒçš„å·®å¼‚ã€‚</p>
<p>Spring è¿˜å…·æœ‰æ”¯æŒä½¿ç”¨ <code>Timer</code> è°ƒåº¦çš„é›†æˆç±»ï¼Œä»¥åŠ Quartz Schedulerã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>FactoryBean</code>ï¼Œå¯é€‰çš„åˆ†åˆ«å¯¹ <code>Timer</code> æˆ–è€… <code>Trigger</code> å®ä¾‹çš„å¼•ç”¨è®¾ç½®è¿™ä¸¤ä¸ªè°ƒåº¦å™¨ã€‚æ­¤å¤–ï¼Œç”¨äº Quartz è°ƒåº¦å™¨å’Œ <code>Timer</code> çš„ä¾¿åˆ©ç±»æ˜¯å¯ç”¨çš„ï¼Œå®ƒè®©ä½ è°ƒç”¨ç°å­˜çš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼ˆç±»ä¼¼äºæ™®é€šçš„ <code>MethodInvokingFactoryBean</code> æ“ä½œï¼‰ã€‚</p>
<h3 id="7-1-The-Spring-TaskExecutor-Abstraction"><a href="#7-1-The-Spring-TaskExecutor-Abstraction" class="headerlink" title="7.1. The Spring TaskExecutor Abstraction"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#scheduling-task-executor">7.1. The Spring TaskExecutor Abstraction</a></h3><p>Executor æ˜¯ JDK ç”¨äºçº¿ç¨‹æ± æ¦‚å¿µçš„åç§°ã€‚ä¹‹æ‰€ä»¥å« â€œexecutorâ€ æ˜¯å› ä¸ºå®é™…ä¸Šä¸èƒ½ä¿è¯åº•å±‚çš„å®ç°å°±æ˜¯æ± ã€‚ä¸€ä¸ª executor å¯ä»¥æ˜¯å•çº¿ç¨‹ï¼Œç”šè‡³æ˜¯åŒæ­¥çš„ã€‚Spring çš„æŠ½è±¡éšè—äº† Java SE å’Œ Java EE ç¯å¢ƒä¹‹é—´çš„å®ç°ç»†èŠ‚ã€‚</p>
<p>Spring çš„ <code>TaskExecutor</code> æ¥å£ä¸ <code>java.util.concurrent.Executor</code> æ¥å£ç›¸åŒã€‚å®é™…ä¸Šï¼Œæœ€åˆå…¶ä¸»è¦å­˜åœ¨çš„åŸå› å°±æ˜¯åœ¨ä½¿ç”¨çº¿ç¨‹æ± çš„æ—¶å€™æŠ½è±¡å‡ºå¯¹ Java 5 çš„éœ€æ±‚ã€‚è¯¥æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼ˆ<code>execute(Runnable task)</code>ï¼‰ï¼Œè¯¥æ–¹æ³•æ¥å—ç»™äºˆçº¿ç¨‹æ± çš„è¯­ä¹‰å’Œé…ç½®çš„ä»»åŠ¡ã€‚</p>
<h4 id="7-1-1-TaskExecutor-Types"><a href="#7-1-1-TaskExecutor-Types" class="headerlink" title="7.1.1. TaskExecutor Types"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#scheduling-task-executor-types">7.1.1. TaskExecutor Types</a></h4><p>Spring åŒ…å«äº†è®¸å¤šé¢„ç½®çš„ <code>TaskExecutor</code> å®ç°ã€‚å¾ˆæœ‰å¯èƒ½ï¼Œä½ æ°¸è¿œä¸éœ€è¦å®ç°è‡ªå·±çš„ç±»ã€‚Spring æä¾›çš„å˜ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li><p><code>SyncTaskExecutor</code>: æ­¤å®ç°ä¸ä¼šå¼‚æ­¥è¿è¡Œè°ƒç”¨ã€‚ç›¸åï¼Œæ¯ä¸ªè°ƒç”¨éƒ½å‘ç”Ÿåœ¨è°ƒç”¨çº¿ç¨‹ä¸­ã€‚å®ƒä¸»è¦ç”¨äºä¸éœ€è¦å¤šçº¿ç¨‹çš„æƒ…å†µï¼Œä¾‹å¦‚åœ¨ç®€å•çš„æµ‹è¯•ç”¨ä¾‹ä¸­ã€‚</p>
</li>
<li><p><code>ThreadPoolTaskExecutor</code>: æ­¤å®ç°æœ€å¸¸ç”¨ã€‚å®ƒæš´éœ²äº†ç”¨äºé…ç½® <code>java.util.concurrent.ThreadPoolExecutor</code> çš„ Bean å±æ€§ï¼Œå¹¶å°†å…¶åŒ…è£…åœ¨ <code>TaskExecutor</code> ä¸­ã€‚å¦‚æœä½ éœ€è¦é€‚åº”å…¶ä»–ç±»å‹çš„ <code>java.util.concurrent.Executor</code>ï¼Œæˆ‘ä»¬å»ºè®®ä½ æ”¹ç”¨ <code>ConcurrentTaskExecutor</code>ã€‚</p>
</li>
</ul>
<h4 id="7-1-2-Using-a-TaskExecutor"><a href="#7-1-2-Using-a-TaskExecutor" class="headerlink" title="7.1.2. Using a TaskExecutor"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#scheduling-task-executor-usage">7.1.2. Using a TaskExecutor</a></h4><p>Spring çš„ <code>TaskExecutor</code> å®ç°è¢«ç”¨ä½œç®€å•çš„ Java Beanã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä½¿ç”¨ <code>ThreadPoolTaskExecutor</code> çš„ Beanï¼Œå¼‚æ­¥åœ°æ‰“å°ä¸€ç»„æ¶ˆæ¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.core.task.TaskExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskExecutorExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">MessagePrinterTask</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MessagePrinterTask</span><span class="params">(String message)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.message = message;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TaskExecutor taskExecutor;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TaskExecutorExample</span><span class="params">(TaskExecutor taskExecutor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.taskExecutor = taskExecutor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printMessages</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">            taskExecutor.execute(<span class="keyword">new</span> <span class="title class_">MessagePrinterTask</span>(<span class="string">&quot;Message&quot;</span> + i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½ æ‰€è§ï¼Œä½ æ²¡æœ‰ä»æ± ä¸­æ£€ç´¢çº¿ç¨‹å¹¶è‡ªå·±æ‰§è¡Œï¼Œè€Œæ˜¯å°†ä½ çš„ <code>Runnable</code> æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚ç„¶å <code>TaskExecutor</code> ä½¿ç”¨å…¶å†…éƒ¨è§„åˆ™æ¥å†³å®šä»»åŠ¡ä½•æ—¶è¿è¡Œã€‚</p>
<p>ä¸ºäº†é…ç½® <code>TaskExecutor</code> ä½¿ç”¨çš„è§„åˆ™ï¼Œæˆ‘ä»¬å°†å…¬å¼€ç®€å•çš„ Bean å±æ€§ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;taskExecutor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;corePoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;queueCapacity&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;taskExecutorExample&quot;</span> <span class="attr">class</span>=<span class="string">&quot;TaskExecutorExample&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">&quot;taskExecutor&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-The-Spring-TaskScheduler-Abstraction"><a href="#7-2-The-Spring-TaskScheduler-Abstraction" class="headerlink" title="7.2. The Spring TaskScheduler Abstraction"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#scheduling-task-scheduler">7.2. The Spring TaskScheduler Abstraction</a></h3><p>é™¤äº† <code>TaskExecutor</code> æŠ½è±¡å¤–ï¼Œ</p>
<h2 id="8-Cache-Abstraction"><a href="#8-Cache-Abstraction" class="headerlink" title="8. Cache Abstraction"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache">8. Cache Abstraction</a></h2><h3 id="8-1-Understanding-the-Cache-Abstraction"><a href="#8-1-Understanding-the-Cache-Abstraction" class="headerlink" title="8.1. Understanding the Cache Abstraction"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-strategies">8.1. Understanding the Cache Abstraction</a></h3><p><strong>Buffer å’Œ Cache</strong></p>
<p>ä¸€èˆ¬åœ°ï¼Œbuffer å¯ä»¥ç¿»è¯‘ä¸ºç¼“å†²åŒºï¼Œç”¨äºé«˜é€Ÿä¸ä½é€Ÿçš„å®ä½“ä¹‹é—´çš„ä¸­é—´å­˜å‚¨ï¼Œç¼“å†²åŒºè‡³å°‘å¯¹çŸ¥æ™“å®ƒçš„ä¸€æ–¹æ˜¯å¯è§çš„ã€‚</p>
<p>cache å¯ä»¥ç¿»è¯‘ä¸ºç¼“å­˜ï¼Œæ ¹æ®å®šä¹‰æ˜¯éšè—çš„ï¼Œä»»ä½•ä¸€æ–¹éƒ½ä¸çŸ¥æ™“ã€‚</p>
<p><strong>Spring æä¾›äº†ä¸€äº›ç¼“å­˜æŠ½è±¡çš„å®ç°</strong>ï¼š</p>
<ul>
<li>SimpleCacheConfiguration</li>
<li>EhCacheCacheConfiguration</li>
<li>GenericCacheConfiguration</li>
<li>RedisCacheConfiguration</li>
<li>â€¦</li>
</ul>
<p>SpringBoot <code>CacheAutoConfiguration</code> ä¸­ä½¿ç”¨ <code>@Import</code> å¯¼å…¥äº† <code>CacheConfigurationImportSelector.class</code>ï¼Œå…¶ä¸­å¯¼å…¥äº†æšä¸¾ç±» <code>CacheType</code> ä¸­æ‰€æœ‰çš„ç¼“å­˜ç±»å‹ã€‚</p>
<p><strong>SimpleCacheConfiguration</strong></p>
<p>åº•å±‚ä½¿ç”¨ <code>concurrentMap</code> å®ç°ï¼Œè§ <code>SimpleCacheConfiguration</code>  æ³¨å…¥ <code>ConcurrentMapCacheManager</code>ã€‚<code>ConcurrentMapCacheManager </code> å±æ€§ <code>dynamic</code> å¯ä»¥é…ç½® <code>cacheName</code> æ˜¯å¦å¯ä»¥åŠ¨æ€ç”Ÿæˆï¼Œé»˜è®¤ä¸º trueã€‚</p>
<h3 id="8-2-Declarative-Annotation-based-Caching"><a href="#8-2-Declarative-Annotation-based-Caching" class="headerlink" title="8.2. Declarative Annotation-based Caching"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-annotations">8.2. Declarative Annotation-based Caching</a></h3><p>Spring ç¼“å­˜æŠ½è±¡æä¾›äº†ä¸€ç»„ Java æ³¨è§£ï¼š</p>
<ul>
<li><code>@Cacheable</code>ï¼šè§¦å‘ç¼“å­˜å¡«å……</li>
<li><code>@CacheEvict</code>ï¼šè§¦å‘ç¼“å­˜é©±é€</li>
<li><code>@CachePut</code>ï¼šåœ¨ä¸å¹²æ‰°æ–¹æ³•æ‰§è¡Œçš„æƒ…å†µä¸‹æ›´æ–°ç¼“å­˜</li>
<li><code>@Caching</code>ï¼šé‡æ–°ç»„åˆè¦åº”ç”¨äºæ–¹æ³•çš„å¤šä¸ªç¼“å­˜æ“ä½œ</li>
<li><code>@CacheConfig</code>ï¼šåœ¨ç±»çº§åˆ«å…±äº«ä¸€äº›å¸¸è§çš„ç¼“å­˜ç›¸å…³è®¾ç½®</li>
</ul>
<h4 id="8-2-1-The-Cacheable-Annotation"><a href="#8-2-1-The-Cacheable-Annotation" class="headerlink" title="8.2.1. The @Cacheable Annotation"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-annotations-cacheable">8.2.1. The @Cacheable Annotation</a></h4><table>
<thead>
<tr>
<th align="left">æ³¨è§£å±æ€§</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">value &#x2F; cacheNames</td>
<td align="left">ç¼“å­˜çš„åå­—</td>
</tr>
<tr>
<td align="left">key</td>
<td align="left">ç¼“å­˜æ•°æ®ä½¿ç”¨çš„ keyï¼Œé»˜è®¤ä½¿ç”¨æ–¹æ³•å‚æ•°</td>
</tr>
<tr>
<td align="left">keyGenerator</td>
<td align="left">è‡ªå®šä¹‰ key ç”Ÿæˆå™¨ï¼Œå®ç° KeyGenerator</td>
</tr>
<tr>
<td align="left">cacheManager</td>
<td align="left">æŒ‡å®šç¼“å­˜ç®¡ç†å™¨</td>
</tr>
<tr>
<td align="left">condition</td>
<td align="left">æŒ‡å®šç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹æ‰ç¼“å­˜</td>
</tr>
<tr>
<td align="left">unless</td>
<td align="left">ç¼“å­˜çš„å¦å®šæ¡ä»¶</td>
</tr>
<tr>
<td align="left">sync</td>
<td align="left">æ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ¨¡å¼</td>
</tr>
</tbody></table>
<h5 id="Default-Key-Generation"><a href="#Default-Key-Generation" class="headerlink" title="Default Key Generation"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-annotations-cacheable-default-key">Default Key Generation</a></h5><p>key é»˜è®¤é‡‡ç”¨ <code>SimpleKeyGenerator</code> ç”Ÿæˆã€‚ä»¥æ–¹æ³•å‚æ•°ä¸ºæ ‡è¯†ã€‚</p>
<h5 id="Synchronized-Caching"><a href="#Synchronized-Caching" class="headerlink" title="Synchronized Caching"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-annotations-cacheable-synchronized">Synchronized Caching</a></h5><p>Spring Core æ¡†æ¶çš„ <code>CacheManager</code> å®ç°éƒ½æ”¯æŒ syncã€‚å…¶ä»–ç¼“å­˜åº“æœªå¿…ã€‚</p>
<h5 id="Available-Caching-SpEL-Evaluation-Context"><a href="#Available-Caching-SpEL-Evaluation-Context" class="headerlink" title="Available Caching SpEL Evaluation Context"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-spel-context">Available Caching SpEL Evaluation Context</a></h5><p>Cache SpEL å¯ç”¨å…ƒæ•°æ®ï¼Œå…·ä½“è§å®˜æ–¹è¡¨ã€‚</p>
<h4 id="8-2-2-The-CachePut-Annotation"><a href="#8-2-2-The-CachePut-Annotation" class="headerlink" title="8.2.2. The @CachePut Annotation"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-annotations-put">8.2.2. The @CachePut Annotation</a></h4><p>æ¯æ¬¡éƒ½è°ƒç”¨æ–¹æ³•ï¼Œç¼“å­˜ç»“æœã€‚</p>
<h4 id="8-2-3-The-CacheEvict-annotation"><a href="#8-2-3-The-CacheEvict-annotation" class="headerlink" title="8.2.3. The @CacheEvict annotation"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-annotations-evict">8.2.3. The @CacheEvict annotation</a></h4><p>æ¸…ç©ºç¼“å­˜</p>
<h4 id="8-2-6-Enabling-Caching-Annotations"><a href="#8-2-6-Enabling-Caching-Annotations" class="headerlink" title="8.2.6. Enabling Caching Annotations"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-annotation-enable">8.2.6. Enabling Caching Annotations</a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-JCache-JSR-107-Annotations"><a href="#8-3-JCache-JSR-107-Annotations" class="headerlink" title="8.3. JCache (JSR-107) Annotations"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-jsr-107">8.3. JCache (JSR-107) Annotations</a></h3><p>ä» Spring 4.1 å¼€å§‹ï¼ŒSpring ç¼“å­˜æŠ½è±¡å®Œå…¨æ”¯æŒ JCache æ³¨è§£</p>
<h4 id="8-3-1-Feature-Summary"><a href="#8-3-1-Feature-Summary" class="headerlink" title="8.3.1. Feature Summary"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#cache-jsr-107-summary">8.3.1. Feature Summary</a></h4><table>
<thead>
<tr>
<th align="left">Spring</th>
<th align="left">JSR-107</th>
<th align="left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Cacheable</td>
<td align="left">@CacheResult</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@CachePut</td>
<td align="left">@CachePut</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@CacheEvict</td>
<td align="left">@CacheRemove</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@CacheEvict(allEntries&#x3D;true)</td>
<td align="left">@CacheRemoveAll</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@CacheConfig</td>
<td align="left">@CacheDefaults</td>
<td align="left"></td>
</tr>
</tbody></table>
<p>JCache çš„ CacheResolver æ¦‚å¿µä¸Šä¸ Spring CacheResolver æ¥å£ç›¸åŒï¼Œåªæ˜¯ JCache ä»…æ”¯æŒå•ä¸ª Cacheã€‚é»˜è®¤ï¼ŒSimple å®ç°ä¼šæ ¹æ®æ³¨è§£ä¸Šçš„åç§°æ£€ç´¢è¦ä½¿ç”¨çš„ Cacheï¼Œå¦‚æœæ³¨è§£ä¸Šæ²¡æœ‰æŒ‡å®šåç§°ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<h4 id="8-3-2-Enabling-JSR-107-Support"><a href="#8-3-2-Enabling-JSR-107-Support" class="headerlink" title="8.3.2. Enabling JSR-107 Support"></a><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.2.17.RELEASE/spring-framework-reference/integration.html#enabling-jsr-107-support">8.3.2. Enabling JSR-107 Support</a></h4><p>å¦‚æœç±»è·¯å¾„åŒæ—¶å­˜åœ¨ JSR-107 API å’Œ spring-context-supportï¼Œ<code>@EnableCaching</code> å’Œ <code>cache:annotation-driven</code> éƒ½ä¼šè‡ªå¯ç”¨ JCacheã€‚</p>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2022/07/26/RFC/RFC-6749/">
        <span class="nav-arrow">â† </span>
        
          RFC 6749
        
      </a>
    
    
      <a class="nav-right" href="/2022/07/27/Security/%E7%9F%AD%E4%BF%A1%E6%8E%A5%E5%8F%A3%E9%98%B2%E7%9B%97%E7%94%A8/">
        
          çŸ­ä¿¡æ¥å£é˜²ç›—ç”¨
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- æ‰“èµ START -->
    
      <div class="money-like">
        <div class="reward-btn">
          èµ
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>ä½¿ç”¨æ”¯ä»˜å®æ‰“èµ</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>ä½¿ç”¨å¾®ä¿¡æ‰“èµ</b>
            </span>
          </span>
        </div>
        <p class="notice">è‹¥ä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¯¹æˆ‘æ‰“èµ</p>
      </div>
    
    <!-- æ‰“èµ END -->
    <!-- äºŒç»´ç  START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">æ‰«æäºŒç»´ç ï¼Œåˆ†äº«æ­¤æ–‡ç« </p>
      </div>
    
    <!-- äºŒç»´ç  END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo="JiangChunbo/jiangchunbo.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Integration"><span class="toc-nav-text">Integration</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Message-Conversion"><span class="toc-nav-text">Message Conversion</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#6-Mail"><span class="toc-nav-text">6. Mail</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#7-Task-Execution-and-Scheduling"><span class="toc-nav-text">7. Task Execution and Scheduling</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-1-The-Spring-TaskExecutor-Abstraction"><span class="toc-nav-text">7.1. The Spring TaskExecutor Abstraction</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#7-1-1-TaskExecutor-Types"><span class="toc-nav-text">7.1.1. TaskExecutor Types</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#7-1-2-Using-a-TaskExecutor"><span class="toc-nav-text">7.1.2. Using a TaskExecutor</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-2-The-Spring-TaskScheduler-Abstraction"><span class="toc-nav-text">7.2. The Spring TaskScheduler Abstraction</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#8-Cache-Abstraction"><span class="toc-nav-text">8. Cache Abstraction</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-1-Understanding-the-Cache-Abstraction"><span class="toc-nav-text">8.1. Understanding the Cache Abstraction</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-2-Declarative-Annotation-based-Caching"><span class="toc-nav-text">8.2. Declarative Annotation-based Caching</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#8-2-1-The-Cacheable-Annotation"><span class="toc-nav-text">8.2.1. The @Cacheable Annotation</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Default-Key-Generation"><span class="toc-nav-text">Default Key Generation</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Synchronized-Caching"><span class="toc-nav-text">Synchronized Caching</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Available-Caching-SpEL-Evaluation-Context"><span class="toc-nav-text">Available Caching SpEL Evaluation Context</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#8-2-2-The-CachePut-Annotation"><span class="toc-nav-text">8.2.2. The @CachePut Annotation</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#8-2-3-The-CacheEvict-annotation"><span class="toc-nav-text">8.2.3. The @CacheEvict annotation</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#8-2-6-Enabling-Caching-Annotations"><span class="toc-nav-text">8.2.6. Enabling Caching Annotations</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-3-JCache-JSR-107-Annotations"><span class="toc-nav-text">8.3. JCache (JSR-107) Annotations</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#8-3-1-Feature-Summary"><span class="toc-nav-text">8.3.1. Feature Summary</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#8-3-2-Enabling-JSR-107-Support"><span class="toc-nav-text">8.3.2. Enabling JSR-107 Support</span></a></li></ol></li></ol></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://example.com/2022/07/27/Spring-Framework/Spring-Framework-Integration/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>






    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2022 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
    
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>